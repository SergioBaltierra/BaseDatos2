-- Generado por Oracle SQL Developer Data Modeler 4.0.3.853
-- en:        2020-01-21 17:48:01 CLST
-- sitio:     SQL Server 2008
-- tipo:      SQL Server 2008

DROP TABLE ARTISTAS;
DROP TABLE ARTISTA_ENTREVISTA;
DROP TABLE ARTISTA_TOTALES_VENTAS;
DROP TABLE ARTISTA_VENTAS;
DROP TABLE CLIENTES_TOTALES;
DROP TABLE CLIENTE_COMPRADOR;
DROP TABLE COLECCIONISTAS;
DROP TABLE CONTACTA;
DROP TABLE EXPOSICIONES;
DROP TABLE OBRAS_ARTE;
DROP TABLE POTENCIALES_CLIENTES;
DROP TABLE SE_EXHIBE;
DROP TABLE VENDEDOR;
DROP TABLE VENTA;

CREATE TABLE ARTISTAS
(
    NOMBRE_ARTISTA VARCHAR (255) NOT NULL,
    CONOCIDO VARCHAR (255),
    DIRECCION_ARTISTA VARCHAR (255),
    TELEFONO_ARTISTA              INTEGER,
    NUMERO_REGISTRO_CONTRIBUYENTE INTEGER
); 
ALTER TABLE ARTISTAS ADD CONSTRAINT ARTISTAS_PK PRIMARY KEY (NOMBRE_ARTISTA);

CREATE TABLE ARTISTA_ENTREVISTA
(
  ID_ARTISTA_ENTREVISTA INTEGER NOT NULL,
  FECHA_ENTREVISTA      DATETIME,
  NOMBRE_ENTREVISTADOR VARCHAR (255),
  NOMBRE_ARTISTA VARCHAR (255) NOT NULL
);
ALTER TABLE ARTISTA_ENTREVISTA ADD CONSTRAINT ARTISTA_ENTREVISTA_PK PRIMARY KEY (ID_ARTISTA_ENTREVISTA);

CREATE TABLE ARTISTA_TOTALES_VENTAS
(
  ID_TOTALES                 INTEGER NOT NULL,
  FECHA_ANIO_TOTALES_VENTAS  INTEGER,
  TOTAL_VENTAS_ANUAL         INTEGER,
  TOTAL_VENTAS_ANIO_ANTERIOR INTEGER,
  NOMBRE_ARTISTA VARCHAR (255) NOT NULL
);
ALTER TABLE ARTISTA_TOTALES_VENTAS ADD CONSTRAINT ARTISTA_TOTALES_VENTAS_PK PRIMARY KEY (ID_TOTALES);

CREATE TABLE ARTISTA_VENTAS
(
  ID_ARTISTA_VENTAS INTEGER NOT NULL,
  CHEQUE            INTEGER,
  COMPROBANTE_PAGO  INTEGER,
  NOMBRE_ARTISTA VARCHAR (255) NOT NULL
);
ALTER TABLE ARTISTA_VENTAS ADD CONSTRAINT ARTISTA_VENTAS_PK PRIMARY KEY (ID_ARTISTA_VENTAS);

CREATE TABLE CLIENTE_COMPRADOR
(
    RUN_CLIENTE VARCHAR (255) NOT NULL,
    NOMBRE_CLIENTE VARCHAR (255),
    DIRECCION_CLIENTE VARCHAR (255),
    TELEFONO_CLIENTE VARCHAR (255),
    CORREO_ELECTRONICO_CLIENTE VARCHAR (255),
    RECIBO INTEGER
);
ALTER TABLE CLIENTE_COMPRADOR ADD CONSTRAINT CLIENTE_COMPRADOR_PK PRIMARY KEY (RUN_CLIENTE);

CREATE TABLE CLIENTES_TOTALES
(
  ID_CLIENTES_TOTALES         INTEGER NOT NULL,
  FECHA_ANIO_CLIENTES_COMPRAS INTEGER,
  TOTAL_COMPRAS_ANIO_PASADO   INTEGER,
  TOTAL_COMPRAS_A_LA_FECHA    INTEGER,
  RUN_CLIENTE VARCHAR (255) NOT NULL
);
ALTER TABLE CLIENTES_TOTALES ADD CONSTRAINT CLIENTES_TOTALES_PK PRIMARY KEY (ID_CLIENTES_TOTALES);

CREATE TABLE COLECCIONISTAS
(
    NOMBRE_COLECCIONISTA VARCHAR (255) NOT NULL,
    DIRECCION_COLECCIONISTA VARCHAR (255),
    NOMBRE_ARTISTA VARCHAR (255) NOT NULL
);
ALTER TABLE COLECCIONISTAS ADD CONSTRAINT COLECCIONISTAS_PK PRIMARY KEY (NOMBRE_COLECCIONISTA);

CREATE TABLE CONTACTA
(
    ID_CONTACTA INTEGER NOT NULL,
    NOMBRE_POTENCIALES_CLIENTES VARCHAR (255) NOT NULL,
    TITULO_EXPOSICION VARCHAR (255) NOT NULL,
    FECHA_CONTACTO DATETIME
);
ALTER TABLE CONTACTA ADD CONSTRAINT CONTACTA_PK PRIMARY KEY (ID_CONTACTA);

CREATE TABLE EXPOSICIONES
(
    TITULO_EXPOSICION VARCHAR (255) NOT NULL,
    FECHA_INICIO_EXPOSICION VARCHAR (255),
    FECHA_TERMINO_EXPOSICION VARCHAR (255),
    TEMA_EXPOSICION VARCHAR (255),
    TIPO_EXPOSICION VARCHAR (255),
    NOMBRE_ARTISTA_DESTACADO VARCHAR (255),
    NOMBRE_ARTISTA VARCHAR (255) NOT NULL
);
ALTER TABLE EXPOSICIONES ADD CONSTRAINT EXPOSICIONES_PK PRIMARY KEY (TITULO_EXPOSICION);

CREATE TABLE OBRAS_ARTE
(
    NOMBRE_ARTISTA VARCHAR (255) NOT NULL,
    TITULO_OBRA VARCHAR (255) NOT NULL,
    ANIO_CREACION INTEGER,
    TIPO VARCHAR (255),
    MEDIO VARCHAR (255),
    ESTILO VARCHAR (255),
    TAMANIO VARCHAR (255),
    ESTADO VARCHAR (255),
    PRECIO_SOLICITADO INTEGER,
    NOMBRE_COLECCIONISTA VARCHAR (255) NOT NULL
);
ALTER TABLE OBRAS_ARTE ADD CONSTRAINT OBRAS_ARTE_PK PRIMARY KEY (NOMBRE_ARTISTA, TITULO_OBRA);

CREATE TABLE POTENCIALES_CLIENTES
(
    NOMBRE_POTENCIALES_CLIENTES VARCHAR (255) NOT NULL,
    DIRECCION_POTENCIALES_CLIENTES VARCHAR (255),
    CORREO_ELECTRONICO VARCHAR (255),
    PREFERENCIAS VARCHAR (255)
);
ALTER TABLE POTENCIALES_CLIENTES ADD CONSTRAINT POTENCIALES_CLIENTES_PK PRIMARY KEY (NOMBRE_POTENCIALES_CLIENTES);

CREATE TABLE SE_EXHIBE
(
    ID_SE_EXHIBE INTEGER NOT NULL,
    NOMBRE_ARTISTA VARCHAR (255) NOT NULL,
    TITULO_OBRA VARCHAR (255) NOT NULL,
    TITULO_EXPOSICION VARCHAR (255) NOT NULL,
    NUMERO_VENTA INTEGER NOT NULL
);
ALTER TABLE SE_EXHIBE ADD CONSTRAINT SE_EXHIBE_PK PRIMARY KEY (ID_SE_EXHIBE);

CREATE TABLE VENDEDOR
(
    RUN_VENDEDOR VARCHAR (255) NOT NULL,
    NOMBRE_VENDEDOR VARCHAR (255),
    DIRECCION_VENDEDOR VARCHAR (255)
);
ALTER TABLE VENDEDOR ADD CONSTRAINT VENDEDOR_PK PRIMARY KEY (RUN_VENDEDOR);

CREATE TABLE VENTA
(
    NUMERO_VENTA INTEGER NOT NULL,
    FECHA_VENTA  DATETIME,
    DESCRIPCION_VENTA VARCHAR (255),
    PRECIO_VENTA_FINAL INTEGER,
    PORCENTAJE_COMISION FLOAT,
    COMISION    INTEGER,
    VENTA_FINAL INTEGER,
    NOMBRE_COLECCIONISTA VARCHAR (255) NOT NULL,
    RUN_VENDEDOR VARCHAR (255) NOT NULL,
    RUN_CLIENTE VARCHAR (255) NOT NULL
);
ALTER TABLE VENTA ADD CONSTRAINT VENTA_PK PRIMARY KEY (NUMERO_VENTA);

-- Relacionar las tablas con ALTER TABLE para FK (Clave Foranea)
ALTER TABLE ARTISTA_ENTREVISTA ADD CONSTRAINT ARTISTA_ENTREVISTA_ARTISTAS_FK 
FOREIGN KEY (NOMBRE_ARTISTA)
REFERENCES ARTISTAS (NOMBRE_ARTISTA)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE ARTISTA_TOTALES_VENTAS ADD CONSTRAINT ARTISTA_TOTALES_VENTAS_ARTISTAS_FK 
FOREIGN KEY (NOMBRE_ARTISTA)
REFERENCES ARTISTAS (NOMBRE_ARTISTA)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE ARTISTA_VENTAS ADD CONSTRAINT ARTISTA_VENTAS_ARTISTAS_FK 
FOREIGN KEY (NOMBRE_ARTISTA)
REFERENCES ARTISTAS (NOMBRE_ARTISTA)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE CLIENTES_TOTALES ADD CONSTRAINT CLIENTES_TOTALES_CLIENTE_COMPRADOR_FK 
FOREIGN KEY (RUN_CLIENTE)
REFERENCES CLIENTE_COMPRADOR (RUN_CLIENTE)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE COLECCIONISTAS ADD CONSTRAINT COLECCIONISTAS_ARTISTAS_FK 
FOREIGN KEY (NOMBRE_ARTISTA)
REFERENCES ARTISTAS (NOMBRE_ARTISTA)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE CONTACTA ADD CONSTRAINT CONTACTA_EXPOSICIONES_FK 
FOREIGN KEY (NOMBRE_POTENCIALES_CLIENTES)
REFERENCES EXPOSICIONES (TITULO_EXPOSICION)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE CONTACTA ADD CONSTRAINT CONTACTA_POTENCIALES_CLIENTES_FK 
FOREIGN KEY (TITULO_EXPOSICION)
REFERENCES POTENCIALES_CLIENTES (NOMBRE_POTENCIALES_CLIENTES)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE EXPOSICIONES ADD CONSTRAINT EXPOSICIONES_ARTISTAS_FK 
FOREIGN KEY (NOMBRE_ARTISTA)
REFERENCES ARTISTAS (NOMBRE_ARTISTA)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE OBRAS_ARTE ADD CONSTRAINT OBRAS_ARTE_ARTISTAS_FK 
FOREIGN KEY (NOMBRE_ARTISTA)
REFERENCES ARTISTAS (NOMBRE_ARTISTA)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE OBRAS_ARTE ADD CONSTRAINT OBRAS_ARTE_COLECCIONISTAS_FK 
FOREIGN KEY (NOMBRE_COLECCIONISTA)
REFERENCES COLECCIONISTAS (NOMBRE_COLECCIONISTA)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE SE_EXHIBE ADD CONSTRAINT SE_EXHIBE_EXPOSICIONES_FK 
FOREIGN KEY (TITULO_EXPOSICION) 
REFERENCES EXPOSICIONES (TITULO_EXPOSICION)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE SE_EXHIBE ADD CONSTRAINT SE_EXHIBE_OBRAS_ARTE_FK 
FOREIGN KEY (NOMBRE_ARTISTA, TITULO_OBRA)
REFERENCES OBRAS_ARTE (NOMBRE_ARTISTA, TITULO_OBRA)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE SE_EXHIBE ADD CONSTRAINT SE_EXHIBE_VENTA_FK 
FOREIGN KEY (NUMERO_VENTA)
REFERENCES VENTA (NUMERO_VENTA)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE VENTA ADD CONSTRAINT VENTA_CLIENTE_COMPRADOR_FK 
FOREIGN KEY (RUN_CLIENTE)
REFERENCES CLIENTE_COMPRADOR (RUN_CLIENTE)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE VENTA ADD CONSTRAINT VENTA_COLECCIONISTAS_FK 
FOREIGN KEY (NOMBRE_COLECCIONISTA)
REFERENCES COLECCIONISTAS (NOMBRE_COLECCIONISTA)
ON DELETE CASCADE
ON UPDATE CASCADE;

ALTER TABLE VENTA ADD CONSTRAINT VENTA_VENDEDOR_FK 
FOREIGN KEY (RUN_VENDEDOR) 
REFERENCES VENDEDOR (RUN_VENDEDOR)
ON DELETE CASCADE
ON UPDATE CASCADE;